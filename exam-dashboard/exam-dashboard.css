/* ---------- Tokens ---------- */
:root{
  --ink-900:#111328;
  --ink-700:#2f3555;
  --ink-500:#70779a;

  --bg:#f5f6fb;
  --panel:#ffffff;
  --line:#e6e8f2;

  /* dark blue-purple scale */
  --pr-600:#4b4ae0;
  --pr-700:#3531c7;
  --pr-800:#251e9e;

  /* grade tags */
  --g-a:#e9f2ff; --g-a-ink:#1841c7;
  --g-b:#edf4ff; --g-b-ink:#2b6fd3;
  --g-c:#f5f7fd; --g-c-ink:#5664a7;
  --g-d:#fff2e6; --g-d-ink:#b15b0a;
  --g-e:#ffe9ee; --g-e-ink:#a61a3a;

  --r-xl:18px; --r-lg:14px; --r-md:10px;

  --sh-1:0 10px 24px rgba(17,19,40,.08);
}

/* ---------- Base ---------- */
*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family:"Poppins", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  color:var(--ink-900);
  background:var(--bg);
}

/* ---------- Shell / Layout (flex only) ---------- */
.shell{
  min-height:100dvh;
  display:flex;
  gap:clamp(14px, 3vw, 24px);
  padding:clamp(14px, 3vw, 24px);
}

/* Sidebar */
.side{
  flex:0 0 280px;
  display:flex; flex-direction:column; gap:16px;
  background:var(--panel);
  border:1px solid var(--line);
  border-radius:var(--r-xl);
  padding:16px;
  box-shadow:var(--sh-1);
}

.brand{
  display:flex; align-items:center; gap:12px;
}
.logo{
  width:42px; height:42px; border-radius:50%;
  display:flex; align-items:center; justify-content:center;
  background:linear-gradient(180deg, var(--pr-600), var(--pr-800));
  color:#fff; font-weight:700;
}
.brand-text h1{
  font-size:18px; margin:0 0 2px 0;
}
.brand-text p{
  margin:0; color:var(--ink-500); font-size:.9rem;
}

.nav{ display:flex; flex-direction:column; gap:8px; }
.nav-link{
  text-decoration:none; color:var(--ink-700);
  padding:.65rem .8rem; border-radius:10px;
}
.nav-link:hover{ background:#f2f3fe; }
.nav-link.active{
  background:linear-gradient(180deg, #eef0ff, #f7f8ff);
  color:var(--pr-700); font-weight:600;
  border:1px solid #e6e8ff;
}

.divider{ height:1px; background:var(--line); margin:2px 0; }

.student{
  margin-top:auto;
  display:flex; align-items:center; gap:10px;
  padding:10px; border:1px solid var(--line); border-radius:12px;
  background:#fafbff;
}
.avatar{
  width:36px; height:36px; border-radius:50%;
  display:flex; align-items:center; justify-content:center;
  background:#eef0ff; color:var(--pr-700); font-weight:700;
}
.student-text{ display:flex; flex-direction:column; }
.student-text span{ color:var(--ink-500); font-size:.9rem; }

/* Main */
.main{
  min-width:0;
  flex:1 1 auto;
  display:flex; flex-direction:column; gap:16px;
}

/* Top bar */
.topbar{
  background:var(--panel);
  border:1px solid var(--line);
  border-radius:var(--r-xl);
  padding:14px 16px;
  display:flex; align-items:center; justify-content:space-between;
  box-shadow:var(--sh-1);
}
.page-title{ margin:0; font-size:20px; }

/* Segmented control (tight mobile friendly) */
.seg{
  position:relative;
  display:flex; align-items:center;
  gap:0; padding:4px; border-radius:999px;
  background:#f2f3fe; border:1px solid var(--line);
}
.seg input{ display:none; }
.seg label{
  padding:.55rem .8rem; border-radius:999px; cursor:pointer;
  color:var(--ink-700); font-weight:600;
}
.seg-indicator{
  position:absolute; inset:4px auto 4px 4px;
  width:calc(33.333% - 0px);
  background:#ffffff;
  border:1px solid #e6e8ff;
  border-radius:999px;
  box-shadow:inset 0 0 0 2px rgba(75,74,224,.08);
  transition:transform .25s ease;
  z-index:0;
}
.seg label{ position:relative; z-index:1; }
#t1:checked ~ .seg-indicator{ transform:translateX(0%); }
#t2:checked ~ .seg-indicator{ transform:translateX(100%); }
#t3:checked ~ .seg-indicator{ transform:translateX(200%); }

/* Cards */
.cards{
  display:flex; flex-wrap:wrap; gap:12px;
}
.card{
  flex:1 1 220px; min-width:220px;
  background:var(--panel);
  border:1px solid var(--line);
  border-radius:var(--r-xl);
  padding:14px 16px;
  box-shadow:var(--sh-1);
}
.card-h{ color:var(--ink-500); font-weight:600; }
.card-v.big{ font-size:28px; font-weight:700; margin-top:6px; }
.card-s{ color:var(--ink-500); margin-top:2px; }

/* Panels */
.panel{
  background:var(--panel);
  border:1px solid var(--line);
  border-radius:var(--r-xl);
  padding:14px 16px;
  box-shadow:var(--sh-1);
  display:flex; flex-direction:column; gap:12px;
}
.panel-h{
  display:flex; align-items:center; justify-content:space-between;
  gap:10px;
}
.panel h3{ margin:0; }
.legend{ display:flex; gap:6px; align-items:center; }

/* Tags (grades) */
.tag{
  display:inline-flex; align-items:center; justify-content:center;
  min-width:30px; height:24px; padding:0 10px;
  border-radius:999px; border:1px solid var(--line);
  font-weight:700; font-size:.9rem;
}
.tag.a{ background:var(--g-a); color:var(--g-a-ink); }
.tag.b{ background:var(--g-b); color:var(--g-b-ink); }
.tag.c{ background:var(--g-c); color:var(--g-c-ink); }
.tag.d{ background:var(--g-d); color:var(--g-d-ink); }
.tag.e{ background:var(--g-e); color:var(--g-e-ink); }

/* Table */
.table-wrap{ overflow:auto; -webkit-overflow-scrolling:touch; }
.table{
  border-collapse:separate; border-spacing:0; width:100%;
  min-width:780px; /* allow horizontal scroll on small screens */
}
.table thead th{
  text-align:left; padding:12px 10px; color:var(--ink-500);
  border-bottom:1px solid var(--line);
  background:#fbfcff;
}
.table tbody td{
  padding:12px 10px; border-bottom:1px solid var(--line);
}
.table tbody tr:hover{ background:#fafbff; }

/* Notes */
.notes p{ margin:0; color:var(--ink-700); }
.actions{ display:flex; gap:10px; margin-top:6px; }
.btn{
  appearance:none; border-radius:10px; cursor:pointer;
  padding:.65rem .9rem; font-weight:600;
  border:1px solid var(--line);
}
.btn.ghost{
  background:#f6f7fe; color:var(--ink-700);
}
.btn.ghost:hover{ filter:brightness(.98); }
.btn.solid{
  color:#fff; border:0;
  background:linear-gradient(180deg, var(--pr-600), var(--pr-800));
}
.btn.solid:hover{ filter:brightness(1.02); }

/* ---------- Tablet (≤1140px) ---------- */
@media screen and (max-width:1140px){
  .shell{ gap:12px; }
  .side{ flex:0 0 240px; }
  .cards .card{ flex:1 1 200px; }
}

/* ---------- Mobile (≤480px) ---------- */
@media screen and (max-width:480px){

  /* Stack layout */
  .shell{ flex-direction:column; padding:12px; gap:12px; }
  .side{ flex:1 1 auto; order:2; padding:12px; }
  .main{ order:1; gap:12px; }

  /* Tight brand + student blocks */
  .student{ padding:10px; }
  .avatar{ width:34px; height:34px; font-size:.95rem; }

  /* Topbar + segmented control (tight pills like your previous fixes) */
  .topbar{ padding:12px; flex-wrap:wrap; gap:8px; }
  .seg{ padding:2px; }
  .seg label{ padding:.45rem .6rem; font-size:.9rem; }
  .seg-indicator{
    inset:2px; width:calc(33.333% - 0px);
    box-shadow:inset 0 0 0 2px rgba(75,74,224,.1);
  }

  /* Cards stack nicely */
  .cards{ gap:10px; }
  .card{ padding:12px; min-width:unset; }

  /* Panels + table */
  .panel{ padding:12px; }
  .table{ min-width:640px; } /* keep smooth horizontal scroll */
  .table thead th, .table tbody td{ padding:10px 8px; }

  /* Actions */
  .actions{ flex-wrap:wrap; }
}
